# Тема нашего проекта - Агрегатор ресторанов

Мы разрабатываем мини-приложение ТГ для удобной агрегации ресторанов рядом с пользователем.
Также будет реализован бот для внесения новых ресторанов в нашу систему.

## Функционал

### Для рядового пользователя:
1. Получить ближайшие рестораны к пользователю по введенному адресу 
2. Возможность выбирать любимые рестораны/категории
3. Агрегированная информация о ресторане из несколкьих источников 
4. Система рекомендаций от бота

### Для фирм:
1. Добавить/удалить/редактировать свой ресторан через специального бота 
2. Возможность 'наследования' свойств ресторанов для быстрого добавления новых заведений 
3. Coming soon: Эффективное продвижение для бизнеса за счет отслеживания поведения пользоавтелей 

## Примерный сценарий взаимодействия с нашим проектом

### Для рядового пользователя:

1. Пользователь вводит в поле адреса адрес, ему автозаполнение подсказывает наиболее подходящие варианты, после чего он получает отсортированный по близости к точке список ресторанов
2. Пользователь одним из способов попадает на карточку ресторана, где он нажимает на кнопку "добавить в избранное" и заведение появляется в закладках
3. Пользователь одним из способов попадает на карточку ресторана, где он получает информацию о ресторане из нескольких источников, принимая свое решение
4. Пользователь получает еженедельную рассылку от бота с рекомендациями ресторанов

### Для фирм

1. Пользователь заходит в админку в боте, добавляет/удаляет/редактировать свои рестораны
2. Coming soon: Пользователь заходит в админку в боте, следит за статистикой


## Структура проекта

### Стек проекта:

1. Фронтенд: 
   - React
   - Vite
   - telegram-apps/telegram-ui (для интеграции с интерфейсом тг) 
2. Бэкенд: 
   - python FastAPI (для создания API)
   - SQLAlchemy (для данных пользователей)
   - Celery (фоновые задачи)
   - Kafka (для распределения нагрузки на БД и бэк при записи польз. логов)
   - aiobotocor (асинхронная S3 для изображений)
   - MongoDB (для меню ресторанов)

3. Контейнеризация через Docker
4. python-telegram-bot для телеграм-ботов

### Что там по архитектуре

Используем микросервисную архитектуру: под фронтенд, бот, бэкенд, все базы данных и утилиты будут созданы контейнеры в Docker.

Бэкенд будет реализован через слоистую архитектуру. \
Делим бэкенд приложения на 3 слоя:
- Слой представления. В этом слое мы будем подготавливаем данные для представления на различных платформах, в нашем случае это будут тг бот и мини-приложение в телеграм 
- Слой сервиса (бизнес-логики). Подготовка данных для сохранения и дальнейшей обработки. Реализует инкапсуляцию бизнес-операций.
- Слой работы с данными. Мы абстрагируем работу с данными, что позволяет бизнес-логике не зависеть от конкретной реализации слоя работы с данными, например, можем легко поменять реляционную БД на нереляционную.

## Реализация этой архитектуры

Мы используем паттерн репозиторий, создавая абстрактный репозиторий для разных целей: один абстрактный для работы с меню ресторана, другой для хранилища фотографий, третий для данных ресторанов и пользователей. \
Для каждого мы будем импелементировать реализацию: для меню будет MongoDB, для фоток S3 (через aiobotocor), для табличек PostreSQL.

Также создаем абстрактный сервис для каждой цели, который будет проводить операции с соответствующим ему абстрактным репозиторием.

В слое представления будут версии для удобного версионирования получившегося API.

Связывать это все будет NGINX, который мы тоже поднимем как отдельный контейнер.

### Схема бд
![](db_schema.png)


## Контакты и роли

- Даниэль Минкин (фронтенд + бд), @MinkinDD - автор идеи, писать ему
- Олег Швецов (бэкенд), @olezha223 
